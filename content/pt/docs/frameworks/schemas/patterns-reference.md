---
title: Refer√™ncia de Patterns
description: Explica√ß√£o t√©cnica detalhada de todos os patterns regex dos schemas Matrix Protocol
icon: i-heroicons-code-bracket
layout: docs
sidebar: true
toc: true
navigation: true
lang: pt
last_updated: 2025-11-01T00:00:00.000Z
order: 3
framework: general
tags:
  - schemas
  - patterns
  - regex
  - validation
keywords:
  - Matrix Protocol
  - regex patterns
  - valida√ß√£o
  - identificadores
  - format validation
---

# Refer√™ncia de Patterns

**Explica√ß√£o t√©cnica completa de todos os patterns regex utilizados nos schemas do Matrix Protocol**

> üéØ **Objetivo**: Documentar cada pattern regex, sua justificativa t√©cnica e casos de uso no contexto do Matrix Protocol.

---

## üìä Vis√£o Geral dos Patterns

Os schemas do Matrix Protocol utilizam **238 patterns** distribu√≠dos pelos 5 frameworks. Cada pattern foi projetado para:

‚úÖ **Garantir consist√™ncia** - Formatos padronizados em todo o ecossistema  
‚úÖ **Prevenir erros** - Valida√ß√£o rigorosa de entradas cr√≠ticas  
‚úÖ **Facilitar integra√ß√£o** - Patterns previs√≠veis e documentados  
‚úÖ **Suportar evolu√ß√£o** - Versionamento e extensibilidade controlados  

---

## üîç Patterns por Categoria

### Identificadores √önicos

#### UKI (Units of Knowledge Interlinked)

**Pattern:** `^uki:[a-z0-9-]+:[a-z0-9_]+:[a-z0-9-]+$`

**Estrutura:** `uki:{scope_ref}:{type_ref}:{slug}`

**Justificativa:**
- **Namespace global**: Prefixo `uki:` evita colis√µes com outros sistemas
- **Escopo hier√°rquico**: `scope_ref` mapeia para estrutura organizacional MOC
- **Tipagem sem√¢ntica**: `type_ref` categoriza o conhecimento (rule, pattern, policy, etc.)
- **Identifica√ß√£o √∫nica**: `slug` identifica a inst√¢ncia espec√≠fica

**Componentes detalhados:**

| Componente | Pattern | Descri√ß√£o | Exemplos |
|------------|---------|-----------|----------|
| `scope_ref` | `[a-z0-9-]+` | Refer√™ncia organizacional (squad, tribe, org) | `squad-payments`, `tribe-platform`, `organization` |
| `type_ref` | `[a-z0-9_]+` | Tipo de conhecimento | `business_rule`, `pattern`, `guideline`, `policy` |
| `slug` | `[a-z0-9-]+` | Identificador espec√≠fico | `discount-logic-001`, `authentication-jwt` |

**Exemplos v√°lidos:**
```
uki:squad-payments:business_rule:discount-logic-001
uki:tribe-platform:pattern:authentication-jwt
uki:organization:policy:data-retention-gdpr
uki:squad-x:rule:validation-email-format
```

**Regras de neg√≥cio implementadas:**
- **Case sensitivity**: Min√∫sculo para evitar problemas de URL/filesystem
- **Caracteres seguros**: Apenas alpanum√©ricos e h√≠fens para compatibilidade web
- **Hierarquia clara**: Estrutura de 4 n√≠veis facilita navega√ß√£o e organiza√ß√£o
- **Extensibilidade**: Pattern suporta evolu√ß√£o organizacional

#### MAL Decision IDs

**Pattern:** `^mal-dec-[0-9]{8}-[a-z0-9]+-[0-9]+$`

**Estrutura:** `mal-dec-{YYYYMMDD}-{conflict_type}-{sequence}`

**Justificativa:**
- **Namespace MAL**: Prefixo `mal-dec-` identifica decis√µes do Matrix Arbiter Layer
- **Timestamp**: Data facilita auditoria e ordena√ß√£o cronol√≥gica
- **Tipo de conflito**: `h1`, `h2`, `h3` ou identificadores alfanum√©ricos
- **Sequ√™ncia**: Numera√ß√£o √∫nica por dia para evitar colis√µes

**Componentes detalhados:**

| Componente | Pattern | Descri√ß√£o | Exemplo |
|------------|---------|-----------|---------|
| Data | `[0-9]{8}` | YYYYMMDD formato | `20250826` |
| Tipo | `[a-z0-9]+` | Identificador do tipo de conflito | `h1`, `h2`, `h3`, `custom` |
| Sequ√™ncia | `[0-9]+` | N√∫mero sequencial (sem zero √† esquerda) | `001`, `042`, `100` |

**Exemplos v√°lidos:**
```
mal-dec-20250826-h1-001    # Primeiro conflito H1 do dia
mal-dec-20250827-h2-042    # 42¬∫ conflito H2 do dia
mal-dec-20250828-custom-100  # 100¬∫ conflito custom do dia
```

#### MAL Event References

**Pattern:** `^mal-evt-[0-9]{8}-[0-9]+$`

**Estrutura:** `mal-evt-{YYYYMMDD}-{sequence}`

**Justificativa:**
- **Correla√ß√£o**: Liga eventos de arbitragem a decis√µes
- **Rastreabilidade**: Permite auditoria completa do processo
- **Ordena√ß√£o**: Data + sequ√™ncia garante ordem cronol√≥gica

**Exemplos v√°lidos:**
```
mal-evt-20250826-001    # Primeiro evento do dia
mal-evt-20250826-042    # 42¬∫ evento do dia
```

### Versionamento

#### Semantic Versioning

**Pattern:** `^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)$`

**Justificativa:**
- **Padr√£o industrial**: Compat√≠vel com SemVer (semantic versioning)
- **Zero √† esquerda proibido**: Evita ambiguidade (01.0.0 vs 1.0.0)
- **Tr√™s componentes**: MAJOR.MINOR.PATCH obrigat√≥rios

**Componentes:**

| Componente | Pattern | Descri√ß√£o | Quando incrementar |
|------------|---------|-----------|-------------------|
| MAJOR | `(0\|[1-9]\d*)` | Mudan√ßas incompat√≠veis | Breaking changes |
| MINOR | `(0\|[1-9]\d*)` | Novas funcionalidades | Backward compatible |
| PATCH | `(0\|[1-9]\d*)` | Bug fixes | Backward compatible fixes |

**Exemplos v√°lidos:**
```
1.0.0    # Release inicial
2.1.3    # Patch em minor release
0.5.0    # Vers√£o pr√©-release
10.25.100 # N√∫meros altos suportados
```

**Exemplos inv√°lidos:**
```
1.0      # Falta componente PATCH
01.0.0   # Zero √† esquerda n√£o permitido
1.0.0-beta # Sufixos n√£o suportados neste pattern
v1.0.0   # Prefixos n√£o suportados
```

#### Schema Version

**Pattern:** `^[0-9]+\.[0-9]+$`

**Justificativa:**
- **Simplicidade**: Apenas MAJOR.MINOR para schemas
- **Estabilidade**: Schemas t√™m evolu√ß√£o mais controlada que software
- **Compatibilidade**: Facilita migrations entre vers√µes

**Exemplos v√°lidos:**
```
1.0      # Schema inicial
1.1      # Minor update
2.0      # Major restructuring
```

### Identificadores de Processo

#### Persistence IDs (MEF)

**Pattern:** `^mef-dr-[0-9]{8}-[a-z0-9]{8}$`

**Estrutura:** `mef-dr-{YYYYMMDD}-{hash}`

**Justificativa:**
- **Namespace**: `mef-dr-` identifica Decision Records no MEF
- **Data**: Facilita particionamento e arquivamento
- **Hash**: 8 caracteres alfanum√©ricos para unicidade

#### MAL Versioning

**Pattern:** `^mal-v[0-9]+\.[0-9]+\.[0-9]+$`

**Estrutura:** `mal-v{MAJOR}.{MINOR}.{PATCH}`

**Justificativa:**
- **Rastreabilidade**: Cada decis√£o registra vers√£o do MAL que a gerou
- **Auditoria**: Permite correlacionar comportamento com vers√£o espec√≠fica
- **Debugging**: Facilita identifica√ß√£o de bugs em vers√µes espec√≠ficas

### Checksums e Integridade

#### Checksum SHA-256

**Pattern:** `^[a-f0-9]{64}$`

**Justificativa:**
- **Integridade**: SHA-256 garante detec√ß√£o de altera√ß√µes
- **Padr√£o**: Hexadecimal lowercase √© conven√ß√£o estabelecida
- **Comprimento fixo**: 64 caracteres para SHA-256

**Exemplo:**
```
a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456
```

### Refer√™ncias Organizacionais

#### Scope References

**Pattern:** `^[a-z0-9-]+$`

**Justificativa:**
- **Hierarquia MOC**: Mapeia diretamente para n√≥s organizacionais
- **URL-safe**: Compat√≠vel com sistemas web e APIs
- **Legibilidade**: Formato human-readable

**Exemplos:**
```
organization        # N√≠vel mais alto
tribe-platform     # Tribe espec√≠fica
squad-payments      # Squad espec√≠fica
team-backend-api    # Granularidade adicional
```

#### Domain References

**Pattern:** `^[a-z0-9-]+$`

**Justificativa:**
- **Categoriza√ß√£o**: Classifica conhecimento por dom√≠nio
- **Governan√ßa**: Facilita aplica√ß√£o de pol√≠ticas por dom√≠nio
- **Busca**: Permite filtros eficientes

**Dom√≠nios comuns:**
```
business        # Regras de neg√≥cio
technical       # Padr√µes t√©cnicos
security        # Pol√≠ticas de seguran√ßa
compliance      # Requisitos regulat√≥rios
operational     # Procedimentos operacionais
```

#### Type References

**Pattern:** `^[a-z0-9_]+$`

**Justificativa:**
- **Tipagem sem√¢ntica**: Classifica natureza do conhecimento
- **Underscores permitidos**: Conven√ß√£o para tipos compostos
- **Extensibilidade**: Organiza√ß√µes podem definir tipos customizados

**Tipos padr√£o:**
```
business_rule    # Regras de neg√≥cio
pattern          # Padr√µes arquiteturais
guideline        # Diretrizes
policy           # Pol√≠ticas corporativas
procedure        # Procedimentos
standard         # Padr√µes t√©cnicos
```

### Formatos de Data e Tempo

#### Date Format (ISO 8601)

**Format:** `date`

**Pattern impl√≠cito:** `YYYY-MM-DD`

**Justificativa:**
- **Padr√£o internacional**: ISO 8601 √© universalmente aceito
- **Ordena√ß√£o**: Formato permite ordena√ß√£o lexicogr√°fica
- **Parsing**: Suportado nativamente em todas as linguagens

#### DateTime Format (ISO 8601)

**Format:** `date-time`

**Pattern impl√≠cito:** `YYYY-MM-DDTHH:mm:ss.sssZ`

**Justificativa:**
- **Precis√£o**: Milissegundos para audit trails
- **Timezone**: UTC (Z) evita ambiguidades
- **Interoperabilidade**: Padr√£o para APIs REST

---

## üèóÔ∏è Arquitetura dos Patterns

### Princ√≠pios de Design

#### 1. Hierarchical Composition
Patterns seguem hierarquia organizacional:
```
uki:organization:policy:data-governance
    ‚îî‚îÄ organization (scope)
       ‚îî‚îÄ policy (type)
          ‚îî‚îÄ data-governance (specific instance)
```

#### 2. Temporal Anchoring
Identificadores incluem timestamps:
```
mal-dec-20250826-h1-001
        ‚îî‚îÄ 20250826 (YYYYMMDD)
```

#### 3. Type Safety
Cada pattern enforce um tipo espec√≠fico:
```
^uki:           # For√ßa namespace UKI
^mal-dec-       # For√ßa namespace MAL Decision
^mef-dr-        # For√ßa namespace MEF Decision Record
```

#### 4. Evolution Support
Patterns suportam extensibilidade:
```
[a-z0-9-]+      # Permite novos valores
[0-9]+\.[0-9]+  # Suporte a versioning
```

### Valida√ß√£o Estratificada

#### N√≠vel 1: Sint√°tica
- **Formato**: Pattern regex b√°sico
- **Comprimento**: minLength/maxLength
- **Caracteres**: Conjunto permitido

#### N√≠vel 2: Sem√¢ntica
- **Refer√™ncias**: scope_ref existe no MOC
- **Versionamento**: version >= previous_version
- **Relacionamentos**: target UKIs existem

#### N√≠vel 3: Neg√≥cio
- **Autoriza√ß√£o**: User pode criar no scope
- **Pol√≠ticas**: Compliance com regras organizacionais
- **Workflow**: Estado permite opera√ß√£o

---

## üîß Casos de Uso por Framework

### MEF (Matrix Embedding Framework)

**Patterns cr√≠ticos:**
- **UKI IDs**: Identifica√ß√£o √∫nica de conhecimento
- **Versioning**: Evolu√ß√£o controlada de UKIs
- **References**: Links entre UKIs

**Cen√°rio t√≠pico:**
```yaml
id: "uki:squad-payments:business_rule:discount-logic-v2"
version: "2.1.0"
previous_version: "2.0.3"
relationships:
  - target: "uki:org:policy:pricing-standards"
```

### ZOF (Zion Orchestration Framework)

**Patterns cr√≠ticos:**
- **Workflow IDs**: Identifica√ß√£o de workflows
- **Step IDs**: Identifica√ß√£o de etapas
- **Service refs**: Refer√™ncias a servi√ßos

**Cen√°rio t√≠pico:**
```yaml
id: "zof-wf-onboarding-premium-v3"
steps:
  - step_id: "kyc_verification"
    automation_config:
      service: "kyc_service_v2"
```

### OIF (Operator Intelligence Framework)

**Patterns cr√≠ticos:**
- **Archetype IDs**: Identifica√ß√£o de archetypes
- **Capability IDs**: Identifica√ß√£o de capacidades
- **Tool references**: Refer√™ncias a ferramentas

### MOC (Matrix Ontology Catalog)

**Patterns cr√≠ticos:**
- **Hierarchy IDs**: Identifica√ß√£o de hierarquias
- **Node IDs**: Identifica√ß√£o de n√≥s
- **Relationship types**: Tipos de relacionamento

### MAL (Matrix Arbiter Layer)

**Patterns cr√≠ticos:**
- **Decision IDs**: Identifica√ß√£o √∫nica de decis√µes
- **Event references**: Refer√™ncias a eventos de arbitragem
- **Precedence rules**: Identifica√ß√£o de regras

---

## üìö Refer√™ncia R√°pida de Patterns

### Identificadores Principais

| Pattern | Uso | Exemplo |
|---------|-----|---------|
| `^uki:[a-z0-9-]+:[a-z0-9_]+:[a-z0-9-]+$` | UKI IDs | `uki:squad-x:rule:data-retention` |
| `^mal-dec-[0-9]{8}-[a-z0-9]+-[0-9]+$` | MAL Decisions | `mal-dec-20250826-h1-001` |
| `^mal-evt-[0-9]{8}-[0-9]+$` | MAL Events | `mal-evt-20250826-001` |
| `^mef-dr-[0-9]{8}-[a-z0-9]{8}$` | MEF Records | `mef-dr-20250826-a1b2c3d4` |

### Versionamento

| Pattern | Uso | Exemplo |
|---------|-----|---------|
| `^(0\|[1-9]\d*)\.(0\|[1-9]\d*)\.(0\|[1-9]\d*)$` | Semantic Versioning | `2.1.3` |
| `^[0-9]+\.[0-9]+$` | Schema Versioning | `1.0` |
| `^mal-v[0-9]+\.[0-9]+\.[0-9]+$` | MAL Versioning | `mal-v1.0.0` |

### Refer√™ncias

| Pattern | Uso | Exemplo |
|---------|-----|---------|
| `^[a-z0-9-]+$` | Scope/Domain refs | `squad-payments` |
| `^[a-z0-9_]+$` | Type refs | `business_rule` |
| `^[a-f0-9]{64}$` | SHA-256 checksums | `a1b2c3d4...` |

---

## üõ†Ô∏è Implementa√ß√£o e Debugging

### Testando Patterns

**JavaScript:**
```javascript
const ukiPattern = /^uki:[a-z0-9-]+:[a-z0-9_]+:[a-z0-9-]+$/
const testId = "uki:squad-payments:business_rule:discount-001"
console.log(ukiPattern.test(testId)) // true
```

**Python:**
```python
import re
uki_pattern = r'^uki:[a-z0-9-]+:[a-z0-9_]+:[a-z0-9-]+$'
test_id = "uki:squad-payments:business_rule:discount-001"
print(bool(re.match(uki_pattern, test_id)))  # True
```

### Debugging Common Issues

#### Case Sensitivity
```
‚ùå uki:Squad-Payments:Business_Rule:Discount
‚úÖ uki:squad-payments:business_rule:discount
```

#### Character Restrictions
```
‚ùå uki:squad_payments:business-rule:discount
‚úÖ uki:squad-payments:business_rule:discount
```

#### Version Format
```
‚ùå 1.0 (missing patch)
‚ùå 01.0.0 (leading zero)
‚úÖ 1.0.0
```

---

**üîç Para mais informa√ß√µes:**
- [Guia de Uso](./schema-usage-guide) - Como implementar valida√ß√£o
- [Casos de Teste](./test-cases) - Exemplos v√°lidos e inv√°lidos
- [Guia de Customiza√ß√£o](./customization-guide) - Como estender patterns