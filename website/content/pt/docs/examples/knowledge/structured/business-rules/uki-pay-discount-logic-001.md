---
title: "Uki Pay Discount Logic 001"
description: "P√°gina wrapper para o asset YAML uki-pay-discount-logic-001.yaml"
layout: "docs"
sidebar: true
toc: true
navigation: true
---

> Source YAML: `pt/docs/examples/knowledge/structured/business-rules/uki-pay-discount-logic-001.yaml`

**Abrir no Visualizador:** [Uki Pay Discount Logic 001](/pt/docs/viewer?file=/docs/examples/knowledge/structured/business-rules/uki-pay-discount-logic-001.yaml)

> üìÑ Tipo: YAML ‚Ä¢ üì¶ Tamanho: 2.2 KB ‚Ä¢ üïí √öltima modifica√ß√£o: 2025-10-10



```yaml
schema: "1.0"
ontology_reference: "moc:squad-payments:v1.0"
version: "2.1.0"

id: uki:squad-payments:business_rule:discount-logic-001
title: "Regras de Desconto por Volume e Cupons"
scope_ref: squad-payments
scope_mode: "restricted"
domain_ref: business
type_ref: business_rule
maturity_ref: validated

created_date: 2024-03-25
last_modified: 2024-03-25
change_summary: "Consolida√ß√£o de regras conflitantes sobre descontos e defini√ß√£o de preced√™ncia"
change_impact: minor
status: active

content: |
  ## Regras de Desconto por Volume
  
  **Aplica√ß√£o autom√°tica baseada no valor total do carrinho:**
  - R$ 500,00 - R$ 999,99: 5% de desconto
  - R$ 1.000,00 - R$ 1.999,99: 10% de desconto  
  - R$ 2.000,00 ou mais: 15% de desconto (m√°ximo)
  
  ## Cupons de Desconto
  
  **Cupons ativos:**
  - PRIMEIRA: 20% primeira compra (m√°ximo R$ 100 desconto)
  - VOLTA: 10% cliente recorrente (sem limite)
  - AMIGO: 5% indica√ß√£o (ambos recebem)
  
  ## Preced√™ncia de Aplica√ß√£o
  
  **Regra de conflito:** Cupons t√™m preced√™ncia sobre desconto autom√°tico por volume.
  **Exce√ß√£o:** Se desconto autom√°tico for maior que cupom, aplicar o maior valor.
  **Ac√∫mulo:** Cupons n√£o acumulam entre si. Apenas um cupom por transa√ß√£o.
  
  ## Valida√ß√µes
  
  - Cupom PRIMEIRA: validar se √© primeira compra do CPF
  - Cupom VOLTA: validar hist√≥rico de compras (m√≠nimo 30 dias da √∫ltima)
  - Cupom AMIGO: validar c√≥digo de indica√ß√£o v√°lido
  - Valor m√≠nimo: R$ 50,00 para qualquer desconto

examples:
  - input: "Carrinho R$ 1.200 + cupom PRIMEIRA (cliente novo)"
    output: "Desconto: R$ 100 (cupom PRIMEIRA limitado), n√£o R$ 120 (10% volume)"
  - input: "Carrinho R$ 800 + cupom VOLTA (cliente recorrente)"  
    output: "Desconto: R$ 80 (10% cupom VOLTA), n√£o R$ 40 (5% volume)"
  - input: "Carrinho R$ 2.500 + cupom AMIGO (5%)"
    output: "Desconto: R$ 375 (15% volume maior que 5% cupom)"

relationships:
  - type: implements
    target: uki:squad-payments:business_rule:fee-calculation-005
    description: "C√°lculo de taxas considera descontos aplicados"
  
  - type: relates_to
    target: uki:squad-payments:business_rule:refund-policy-002
    description: "Desconto afeta c√°lculo de refund proporcional"

domain_of_influence: "engineering_teams"
```
