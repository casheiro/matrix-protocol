# Page snapshot

```yaml
- generic [ref=e3]:
  - banner [ref=e4]:
    - navigation "Primary navigation" [ref=e5]:
      - generic [ref=e6]:
        - link "Go to homepage" [ref=e8] [cursor=pointer]:
          - /url: /en
          - generic [ref=e9]: Matrix Protocol
        - generic [ref=e11]:
          - button "Frameworks menu" [ref=e12]: Frameworks
          - link "Documentation" [ref=e14] [cursor=pointer]:
            - /url: /en/protocol
          - link "Manual" [ref=e15] [cursor=pointer]:
            - /url: /en/manual
          - link "Resources" [ref=e16] [cursor=pointer]:
            - /url: /en/resources
        - generic [ref=e17]:
          - link "Visit GitHub repository" [ref=e18] [cursor=pointer]:
            - /url: https://github.com/casheiro/matrix-protocol
          - button "Select language" [ref=e20]:
            - generic [ref=e22]: EN
  - main [ref=e24]:
    - main [ref=e27]:
      - generic [ref=e28]:
        - generic [ref=e31]:
          - generic [ref=e35]:
            - generic [ref=e37]: M
            - generic [ref=e38]:
              - generic [ref=e39]:
                - heading "MAL" [level=1] [ref=e40]
                - generic [ref=e41]: v0.0.1
              - heading "Matrix Arbiter Layer" [level=2] [ref=e42]
              - paragraph
          - generic [ref=e43]:
            - link "Download Templates" [ref=e44] [cursor=pointer]:
              - /url: /en/resources#basic-mal
              - generic [ref=e45]: Download Templates
            - link "Implement Now" [ref=e47] [cursor=pointer]:
              - /url: /en/implementation
              - generic [ref=e48]: Implement Now
          - generic [ref=e51]:
            - heading "MAL — Matrix Arbiter Layer" [level=1] [ref=e52]
            - paragraph [ref=e53]:
              - strong [ref=e54]: "Acronym:"
              - text: MAL
              - strong [ref=e55]: "Version:"
              - text: 0.0.1-beta
              - strong [ref=e56]: "Last Update:"
              - text: 2025-10-05
            - blockquote [ref=e57]:
              - paragraph [ref=e58]:
                - text: ⚠️
                - strong [ref=e59]: IMPORTANT
                - text: ": This document is an informative translation. The authoritative version is MAL_MATRIX_ARBITER_LAYER.md."
            - blockquote [ref=e60]:
              - paragraph [ref=e61]: "\"In the absence of conflict, wisdom remains untested.\" — Ancient Proverb"
            - separator [ref=e62]
            - heading "1. Introduction" [level=2] [ref=e63]
            - paragraph [ref=e64]:
              - text: The
              - strong [ref=e65]: Matrix Arbiter Layer (MAL)
              - text: is the conflict arbitration and concurrency layer of the protocol that operates as the final decision-making authority when local governance rules cannot resolve complex conflicts.
            - paragraph [ref=e66]:
              - text: MAL is invoked
              - strong [ref=e67]: only
              - text: "when local rules (scope filtering, authority validation, EvaluateForEnrich) cannot resolve three specific types of conflict: horizontal conflicts between equivalent UKIs, concurrent enrichment attempts, and promotion contentions."
            - paragraph [ref=e68]: MAL does not replace MOC, ZOF, OIF, or MEF; it provides deterministic decision-making, then delegates explanation to OIF and persistence to MEF while respecting policies configured in MOC.
            - separator [ref=e69]
            - heading "2. Terms and Definitions" [level=2] [ref=e70]
            - list [ref=e71]:
              - listitem [ref=e72]:
                - strong [ref=e73]: Arbitration Event
                - text: ": Normalized input describing a conflict or concurrency condition requiring MAL decision"
              - listitem [ref=e74]:
                - strong [ref=e75]: Decision Record
                - text: ": Signed and immutable result with winner/loser designation, justification and references"
              - listitem [ref=e76]:
                - strong [ref=e77]: Precedence Policy
                - text: ": Ordered tiebreaker rules configured in MOC with defaults provided by MAL"
              - listitem [ref=e78]:
                - strong [ref=e79]: Horizontal Conflict (H1)
                - text: ": Two or more equivalent scope-level UKIs that conflict semantically"
              - listitem [ref=e80]:
                - strong [ref=e81]: Concurrent Enrichment (H2)
                - text: ": Two or more flows attempting to enrich overlapping semantics simultaneously"
              - listitem [ref=e82]:
                - strong [ref=e83]: Promotion Contention (H3)
                - text: ": Competing proposals to promote distinct UKIs to higher governance level"
            - paragraph [ref=e84]:
              - text: Additional references in
              - strong [ref=e85]: MOC (Matrix Ontology Catalog)
              - text: for specific organizational arbitration policies.
            - separator [ref=e86]
            - heading "3. Core Concepts" [level=2] [ref=e87]
            - heading "No-Op Principle" [level=3] [ref=e88]
            - paragraph [ref=e89]: MAL operates as a last-resort arbitration layer. If scope/authority rules can resolve conflicts locally through standard MOC validation, MAL MUST NOT be invoked.
            - heading "Deterministic Decision-Making" [level=3] [ref=e90]
            - paragraph [ref=e91]: Given identical inputs and policy configuration, MAL MUST produce consistent and reproducible decisions across all invocations to ensure system predictability.
            - heading "Epistemic Justification Integration" [level=3] [ref=e92]
            - paragraph [ref=e93]: Every MAL decision MUST include epistemological justification aligned with MEP principles, referencing specific MOC nodes and providing traceable reasoning.
            - heading "Auditability and Transparency" [level=3] [ref=e94]
            - paragraph [ref=e95]: All arbitration decisions MUST be persisted as immutable Decision Records with complete traceability to input UKIs, MOC policies, and reasoning chains.
            - heading "Non-Blocking User Experience" [level=3] [ref=e96]
            - paragraph [ref=e97]: "If MAL cannot decide within configured arbitration_timeout, ZOF MUST apply safe default result:"
            - list [ref=e98]:
              - listitem [ref=e99]: Outcome = no enrich
              - listitem [ref=e100]: Status = pending arbitration
            - paragraph [ref=e101]: OIF MUST notify user that arbitration is pending, including MOC escalation instructions if available.
            - separator [ref=e102]
            - heading "4. Normative Rules" [level=2] [ref=e103]
            - blockquote [ref=e104]:
              - paragraph [ref=e105]:
                - text: ⚠️ This section is
                - strong [ref=e106]: normative
                - text: .
            - heading "Mandatory Invocation Conditions" [level=3] [ref=e107]
            - paragraph [ref=e108]: ZOF MUST invoke MAL when detecting H1, H2, or H3 conflict types after completing the EvaluateForEnrich checkpoint and local resolution attempts have failed.
            - heading "Arbitration Authority Boundaries" [level=3] [ref=e109]
            - list [ref=e110]:
              - listitem [ref=e111]: MAL MUST make final decisions on conflicts within its scope
              - listitem [ref=e112]: MAL MUST NOT communicate results directly to users
              - listitem [ref=e113]: OIF MUST NOT attempt arbitration; MUST only explain MAL results
              - listitem [ref=e114]:
                - text: "OIF MUST render all MAL results using an Arbitration Explanation Template that includes at least:"
                - list [ref=e115]:
                  - listitem [ref=e116]: decision_id
                  - listitem [ref=e117]: outcome
                  - listitem [ref=e118]: winner/losers (if applicable)
                  - listitem [ref=e119]: precedence_applied
                  - listitem [ref=e120]: epistemic_rationale with moc_nodes cited
              - listitem [ref=e121]: MEF MUST persist all MAL decisions as immutable Decision Records
              - listitem [ref=e122]: MOC MUST provide policy configuration but MUST NOT override MAL decisions
            - heading "Normalized Input Requirements" [level=3] [ref=e123]
            - paragraph [ref=e124]: "Every Arbitration Event MUST contain:"
            - list [ref=e125]:
              - listitem [ref=e126]:
                - strong [ref=e127]: event_id
                - text: ": Unique identifier for the arbitration request"
              - listitem [ref=e128]:
                - strong [ref=e129]: event_type
                - text: ": One of {H1, H2, H3} indicating conflict classification"
              - listitem [ref=e130]:
                - strong [ref=e131]: candidates
                - text: ": Array of conflicting UKI references with complete metadata"
              - listitem [ref=e132]:
                - strong [ref=e133]: user_moc_context
                - text: ": User hierarchical claims and authority levels"
              - listitem [ref=e134]:
                - strong [ref=e135]: operation
                - text: ": Type of operation requested (read/enrich/promote)"
              - listitem [ref=e136]:
                - strong [ref=e137]: policy_ref
                - text: ": Optional reference to specific MOC arbitration policy"
            - heading "Precedence Policy Hierarchy" [level=3] [ref=e138]
            - paragraph [ref=e139]: MAL MUST apply precedence rules as configured in MOC.
            - paragraph [ref=e140]: If policy_ref is provided in the Arbitration Event, MAL MUST resolve using the referenced policy from MOC.
            - paragraph [ref=e141]: If absent, MAL MAY use its canonical default precedence (P1–P6).
            - paragraph [ref=e142]: Organizations MUST always configure arbitration policies in MOC to override defaults.
            - paragraph [ref=e143]: "Canonical default precedence order:"
            - list [ref=e144]:
              - listitem [ref=e145]:
                - strong [ref=e146]: P1 Authority Weight
                - text: ": Higher authority node in MOC hierarchy wins"
              - listitem [ref=e147]:
                - strong [ref=e148]: P2 Scope Specificity
                - text: ": More specific scope wins for local instructions; broader scope wins for mandatory global rules"
              - listitem [ref=e149]:
                - strong [ref=e150]: P3 Maturity Level
                - text: ": validated > endorsed > draft/experimental"
              - listitem [ref=e151]:
                - strong [ref=e152]: P4 Temporal Recency
                - text: ": More recent version wins if not violating lifecycle rules"
              - listitem [ref=e153]:
                - strong [ref=e154]: P5 Evidence Density
                - text: ": UKI with more MEF evidence links and references"
              - listitem [ref=e155]:
                - strong [ref=e156]: P6 Deterministic Fallback
                - text: ": Lexicographic comparison of UKI identifier"
            - heading "Decision Outcomes" [level=3] [ref=e157]
            - paragraph [ref=e158]: "MAL MUST produce one of four outcomes:"
            - list [ref=e159]:
              - listitem [ref=e160]:
                - strong [ref=e161]: winner
                - text: ": Single UKI chosen as authoritative"
              - listitem [ref=e162]:
                - strong [ref=e163]: coexist
                - text: ": Multiple UKIs valid through scope partitioning"
              - listitem [ref=e164]:
                - strong [ref=e165]: reject_all
                - text: ": None satisfy policy requirements"
              - listitem [ref=e166]:
                - strong [ref=e167]: defer
                - text: ": Requires human override or escalation"
            - heading "Persistence and Communication Requirements" [level=3] [ref=e168]
            - paragraph [ref=e169]: MAL MUST NOT introduce ontological terms outside MOC.
            - paragraph [ref=e170]: "All results must reference existing ontology fields:"
            - list [ref=e171]:
              - listitem [ref=e172]: scope_ref (partitioning)
              - listitem [ref=e173]: authority_ref (authority hierarchy)
              - listitem [ref=e174]: lifecycle_ref (promotion/deprecation rules)
            - paragraph [ref=e175]: Relationships (conflicts_with, supersedes) MUST be persisted in MEF, always citing MOC references.
            - list [ref=e176]:
              - listitem [ref=e177]: MEF MUST store Decision Records with conflict relationships using MOC ontological terms
              - listitem [ref=e178]: OIF MUST receive structured messages to explain decisions using Arbitration Explanation Templates
              - listitem [ref=e179]: "Arbitration Explanation Templates MUST include mandatory minimum fields: decision_id, outcome, winner/losers, precedence_applied, epistemic_rationale with moc_nodes cited"
              - listitem [ref=e180]: All decisions MUST include epistemic justification referencing MOC nodes and MEF evidence
            - heading "Time and Consistency Constraints" [level=3] [ref=e181]
            - list [ref=e182]:
              - listitem [ref=e183]: MAL MUST complete arbitration within arbitration_timeout configured in MOC
              - listitem [ref=e184]:
                - text: "If MAL cannot decide within configured arbitration_timeout, ZOF MUST apply safe default result:"
                - list [ref=e185]:
                  - listitem [ref=e186]: Outcome = no enrich
                  - listitem [ref=e187]: Status = pending arbitration
              - listitem [ref=e188]: OIF MUST notify user that arbitration is pending, including MOC escalation instructions if available
              - listitem [ref=e189]: Decision Records MUST be immutable once persisted
            - separator [ref=e190]
            - heading "5. Interoperability" [level=2] [ref=e191]
            - list [ref=e192]:
              - listitem [ref=e193]:
                - strong [ref=e194]: MEF (Matrix Embedding Framework)
                - text: ": Persists Decision Records as immutable audit trail"
              - listitem [ref=e195]:
                - strong [ref=e196]: ZOF (Zion Orchestration Framework)
                - text: ": Detects H1/H2/H3 conditions and invokes MAL with Arbitration Events"
              - listitem [ref=e197]:
                - strong [ref=e198]: OIF (Operator Intelligence Framework)
                - text: ": Renders MAL decisions to users via Arbitration Explanation templates"
              - listitem [ref=e199]:
                - strong [ref=e200]: MOC (Matrix Ontology Catalog)
                - text: ": Provides arbitration policies and precedence rule configuration"
              - listitem [ref=e201]:
                - strong [ref=e202]: MEP (Matrix Epistemic Principle)
                - text: ": Guides epistemic justification generation and ensures derived authority principles"
            - separator [ref=e203]
            - heading "6. Conventions and Examples" [level=2] [ref=e204]
            - paragraph [ref=e205]:
              - text: All examples in this document are
              - strong [ref=e206]: merely illustrative
              - text: and do not define normative behavior.
              - text: Normative semantics (scopes, governance, archetypes, enrichment criteria) are always derived from each organization's
              - strong [ref=e207]: MOC (Matrix Ontology Catalog)
              - text: .
              - text: Examples are provided for clarity and MAY be adapted to local contexts, but MUST NOT be treated as protocol-level obligations.
            - separator [ref=e208]
            - heading "7. Illustrative Examples (Appendix)" [level=2] [ref=e209]
            - blockquote [ref=e210]:
              - paragraph [ref=e211]:
                - strong [ref=e212]: Example (Informative, MOC-Dependent)
            - heading "Horizontal Conflict Arbitration (H1)" [level=3] [ref=e213]:
              - strong [ref=e214]: Horizontal Conflict Arbitration (H1)
            - generic [ref=e215]:
              - generic [ref=e216]: yaml
              - code [ref=e218]:
                - code [ref=e219]:
                  - generic [ref=e220]: "# --- Illustrative Example ---"
                  - generic [ref=e221]: "arbitration_event:"
                  - generic [ref=e222]: "event_id: \"mal-evt-20250826-001\""
                  - generic [ref=e223]: "event_type: \"H1\""
                  - generic [ref=e224]: "conflict_description: \"Two security rules of equivalent scope in conflict\""
                  - generic [ref=e226]: "candidates:"
                  - generic [ref=e227]: "- uki_ref: \"uki:squad-x:rule:data-retention-30d\""
                  - generic [ref=e228]: "scope_ref: \"squad-x\""
                  - generic [ref=e229]: "domain_ref: \"security\""
                  - generic [ref=e230]: "type_ref: \"rule\""
                  - generic [ref=e231]: "maturity_level: \"validated\""
                  - generic [ref=e232]: "version: \"1.2.0\""
                  - generic [ref=e233]: "evidence_refs: [\"uki:org:policy:gdpr-compliance\", \"doc:audit-logs-2024\"]"
                  - generic [ref=e235]: "- uki_ref: \"uki:squad-x:rule:data-retention-7d\""
                  - generic [ref=e236]: "scope_ref: \"squad-x\""
                  - generic [ref=e237]: "domain_ref: \"security\""
                  - generic [ref=e238]: "type_ref: \"rule\""
                  - generic [ref=e239]: "maturity_level: \"endorsed\""
                  - generic [ref=e240]: "version: \"2.0.0\""
                  - generic [ref=e241]: "evidence_refs: [\"uki:org:policy:data-minimization\"]"
                  - generic [ref=e243]: "user_moc_context:"
                  - generic [ref=e244]: "scopes: [\"squad-x\", \"tribe-alpha\", \"organization\"]"
                  - generic [ref=e245]: "authority_level: \"squad_lead\""
                  - generic [ref=e247]: "operation: \"enrich\""
                  - generic [ref=e248]: "decision_record:"
                  - generic [ref=e249]: "decision_id: \"mal-dec-20250826-h1-001\""
                  - generic [ref=e250]: "outcome: \"winner\""
                  - generic [ref=e252]: "winner: \"uki:squad-x:rule:data-retention-30d\""
                  - generic [ref=e253]: "losers: [\"uki:squad-x:rule:data-retention-7d\"]"
                  - generic [ref=e255]: "precedence_applied:"
                  - generic [ref=e256]: "- \"P3_maturity\": \"validated > endorsed\""
                  - generic [ref=e257]: "- \"P5_evidence\": \"GDPR compliance supersedes data minimization in security context\""
                  - generic [ref=e259]: "epistemic_rationale:"
                  - generic [ref=e260]: "summary: \"Validated maturity and stronger regulatory evidence\""
                  - generic [ref=e261]: "reasoning: |"
                  - generic [ref=e262]: While both UKIs operate at equivalent squad scope, the 30-day
                  - generic [ref=e263]: retention rule demonstrates higher epistemological maturity and stronger
                  - generic [ref=e264]: regulatory evidence linked to GDPR compliance requirements.
              - button "Copiar código" [ref=e265]:
                - img [ref=e266]
            - heading "Concurrent Enrichment Arbitration (H2)" [level=3] [ref=e268]:
              - strong [ref=e269]: Concurrent Enrichment Arbitration (H2)
            - generic [ref=e270]:
              - generic [ref=e271]: yaml
              - code [ref=e273]:
                - code [ref=e274]:
                  - generic [ref=e275]: "# --- Illustrative Example ---"
                  - generic [ref=e276]: "arbitration_event:"
                  - generic [ref=e277]: "event_id: \"mal-evt-20250826-002\""
                  - generic [ref=e278]: "event_type: \"H2\""
                  - generic [ref=e279]: "conflict_description: \"Simultaneous enrichment attempts on authentication patterns\""
                  - generic [ref=e280]: "decision_record:"
                  - generic [ref=e281]: "decision_id: \"mal-dec-20250826-h2-001\""
                  - generic [ref=e282]: "outcome: \"winner\""
                  - generic [ref=e284]: "precedence_applied:"
                  - generic [ref=e285]: "- \"P1_authority\": \"tech_lead > developer\""
                  - generic [ref=e287]: "actions:"
                  - generic [ref=e288]: "- \"allow_enrich:zof-auth-jwt-implementation-002\""
                  - generic [ref=e289]: "- \"defer_enrich:zof-auth-jwt-implementation-001\""
                  - generic [ref=e291]: "epistemic_rationale:"
                  - generic [ref=e292]: "summary: \"Higher authority precedence in concurrent scenario\""
              - button "Copiar código" [ref=e293]:
                - img [ref=e294]
            - heading "Promotion Contention Arbitration (H3)" [level=3] [ref=e296]:
              - strong [ref=e297]: Promotion Contention Arbitration (H3)
            - generic [ref=e298]:
              - generic [ref=e299]: yaml
              - code [ref=e301]:
                - code [ref=e302]:
                  - generic [ref=e303]: "# --- Illustrative Example ---"
                  - generic [ref=e304]: "arbitration_event:"
                  - generic [ref=e305]: "event_id: \"mal-evt-20250826-003\""
                  - generic [ref=e306]: "event_type: \"H3\""
                  - generic [ref=e307]: "conflict_description: \"Competing promotion proposals to organizational level\""
                  - generic [ref=e308]: "decision_record:"
                  - generic [ref=e309]: "decision_id: \"mal-dec-20250826-h3-001\""
                  - generic [ref=e310]: "outcome: \"winner\""
                  - generic [ref=e312]: "winner: \"uki:tribe-alpha:guideline:code-review-standard\""
                  - generic [ref=e314]: "precedence_applied:"
                  - generic [ref=e315]: "- \"P1_authority\": \"tribe_lead > squad_lead for org-level promotions\""
                  - generic [ref=e316]: "- \"P2_scope\": \"tribe level closer to org-level than squad-level\""
                  - generic [ref=e317]: "- \"P5_evidence\": \"External compliance audit carries greater weight\""
                  - generic [ref=e319]: "epistemic_rationale:"
                  - generic [ref=e320]: "summary: \"Convergence of authority, scope proximity and compliance evidence\""
              - button "Copiar código" [ref=e321]:
                - img [ref=e322]
            - separator [ref=e324]
            - heading "8. Minimal MAL Interfaces (Normative)" [level=2] [ref=e325]
            - heading "Arbitration Event Input Schema" [level=3] [ref=e326]
            - generic [ref=e327]:
              - generic [ref=e328]: yaml
              - code [ref=e330]:
                - code [ref=e331]:
                  - generic [ref=e332]: "# --- Normative Interface ---"
                  - generic [ref=e333]: "arbitration_event:"
                  - generic [ref=e334]: "event_id: string # Mandatory: Unique arbitration identifier"
                  - generic [ref=e335]: "event_type: enum[H1, H2, H3] # Mandatory: Conflict classification"
                  - generic [ref=e336]: "timestamp: ISO8601 # Mandatory: Event creation timestamp"
                  - generic [ref=e338]: "candidates: array # Mandatory: Conflicting entities"
                  - generic [ref=e339]: "- uki_ref: string # UKI identifier"
                  - generic [ref=e340]: "scope_ref: string # MOC scope reference"
                  - generic [ref=e341]: "domain_ref: string # MOC domain reference"
                  - generic [ref=e342]: "maturity_level: string # Maturity classification"
                  - generic [ref=e343]: "evidence_refs: array[string] # Supporting evidence references"
                  - generic [ref=e345]: "user_moc_context: # Mandatory: User context"
                  - generic [ref=e346]: "scopes: array[string] # User scope hierarchy"
                  - generic [ref=e347]: "authority_level: string # User authority designation"
                  - generic [ref=e349]: "operation: enum[read, enrich, promote] # Mandatory: Requested operation"
                  - generic [ref=e350]: "policy_ref: string # Optional: Specific arbitration policy"
              - button "Copiar código" [ref=e351]:
                - img [ref=e352]
            - heading "Decision Record Output Schema" [level=3] [ref=e354]
            - generic [ref=e355]:
              - generic [ref=e356]: yaml
              - code [ref=e358]:
                - code [ref=e359]:
                  - generic [ref=e360]: "# --- Normative Interface ---"
                  - generic [ref=e361]: "decision_record:"
                  - generic [ref=e362]: "decision_id: string # Mandatory: Unique decision identifier"
                  - generic [ref=e363]: "event_ref: string # Mandatory: Reference to arbitration event"
                  - generic [ref=e364]: "outcome: enum[winner, coexist, reject_all, defer] # Mandatory: Decision result"
                  - generic [ref=e366]: "winner: string # Conditional: Chosen UKI (if outcome=winner)"
                  - generic [ref=e367]: "precedence_applied: array # Mandatory: Applied precedence rules"
                  - generic [ref=e369]: "epistemic_rationale: # Mandatory: MEP-aligned explanation"
                  - generic [ref=e370]: "summary: string # Brief decision justification"
                  - generic [ref=e371]: "reasoning: string # Detailed explanation"
                  - generic [ref=e372]: "references:"
                  - generic [ref=e373]: "moc_nodes: array[string] # Referenced MOC nodes"
                  - generic [ref=e374]: "mef_evidence: array[string] # Referenced MEF evidence"
                  - generic [ref=e376]: "audit: # Mandatory: Audit information"
                  - generic [ref=e377]: "decided_at: ISO8601 # Decision timestamp"
                  - generic [ref=e378]: "decided_by: string # MAL version identifier"
                  - generic [ref=e379]: "timeout_used_ms: integer # Processing time used"
              - button "Copiar código" [ref=e380]:
                - img [ref=e381]
        - complementary [ref=e383]:
          - generic [ref=e385]:
            - heading "Table of Contents" [level=3] [ref=e387]
            - navigation "Table of Contents":
              - list
            - generic [ref=e391]: 0% lido
  - contentinfo [ref=e393]:
    - generic [ref=e395]:
      - paragraph [ref=e396]:
        - text: Matrix Protocol - Protocol conceived, created and maintained by
        - link "Casheiro" [ref=e397] [cursor=pointer]:
          - /url: https://casheiro.com.br
      - paragraph [ref=e398]: © 2025 Casheiro. All rights reserved.
```