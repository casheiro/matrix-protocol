# Padr√µes de Migra√ß√£o v1 ‚Üí v2

Este documento consolida todos os padr√µes identificados durante a migra√ß√£o bem-sucedida da p√°gina index.vue e componentes relacionados.

## üéØ Objetivo

Documentar **padr√µes cr√≠ticos** para garantir que futuras migra√ß√µes de componentes sigam as adapta√ß√µes necess√°rias desde o in√≠cio, evitando retrabalho.

## üìä An√°lise Comparativa Realizada

### Componentes Analisados
- ‚úÖ `pages/index.vue` (migra√ß√£o completa)
- ‚úÖ `components/layout/AppHeader.vue` 
- ‚úÖ `components/layout/MobileDrawer.vue`
- ‚úÖ `components/navigation/FrameworkDropdown.vue`
- ‚úÖ `composables/useSEO.ts`
- ‚úÖ `composables/useMatrixConfig.ts`

### Status da Migra√ß√£o
- **100% funcional**: p√°gina index.vue
- **Navega√ß√£o completa**: desktop e mobile
- **i18n integrado**: PT/EN 
- **SEO otimizado**: meta tags din√¢micas
- **Atribui√ß√£o correta**: Casheiro como criador

---

## ‚ö†Ô∏è PADR√ïES CR√çTICOS IDENTIFICADOS

### 1. **Tailwind CSS v4 - Convers√£o Obrigat√≥ria de @apply**

#### ‚ùå **PROBLEMA** (Original v1)
```vue
<style scoped>
.nav-link {
  @apply text-gray-600 hover:text-gray-900 px-3 py-2;
}
.nav-link-active {
  @apply text-blue-600 font-semibold;
}
</style>
```


#### ‚úÖ **SOLU√á√ÉO** (Nova v2)
```vue
<template>
  <button 
    class="text-gray-600 hover:text-gray-900 px-3 py-2"
    :class="{ 'text-blue-600 font-semibold': isActive }"
  >
    Button
  </button>
</template>

<style scoped>
/* Apenas CSS puro que n√£o usa classes Tailwind */
.custom-height {
  height: 4.5rem;
}
</style>
```


#### **Arquivos que PRECISAM dessa convers√£o:**
- `/components/navigation/FrameworkDropdown.vue`
- `/components/layout/MobileDrawer.vue` 
- `/components/layout/AppHeader.vue`
- `/components/frameworks/TableOfContents.vue`
- `/components/frameworks/FrameworkSidebar.vue`
- `/components/frameworks/FrameworkLayout.vue`
- **+ 9 outros componentes docs/content**

**Total**: 15+ arquivos identificados com `@apply`

---

### 2. **Rotas i18n - Padr√£o de Uso**

#### ‚úÖ **Padr√£o Preferencial**
```vue
<NuxtLink :to="localePath('/frameworks/mef')">
```


#### ‚ö†Ô∏è **Alternativa quando localePath falha**
```vue
<NuxtLink :to="`/${$i18n.locale}/frameworks/mef`">
```


**Contextos onde foi necess√°rio usar alternativa:**
- MobileDrawer.vue (problemas de contexto de composable)
- Templates com v-for din√¢mico
- Condi√ß√µes espec√≠ficas de rota

---

### 3. **Configura√ß√£o Runtime - Obrigat√≥ria**

#### ‚ùå **PROBLEMA** (Original v1)
```ts
// nuxt.config.ts - FALTAVA
runtimeConfig: {
  public: {
    siteUrl: process.env.SITE_URL || 'http://localhost:3000'
    // appName e appVersion AUSENTES
  }
}
```


#### ‚úÖ **SOLU√á√ÉO** (Nova v2)
```ts
// nuxt.config.ts - OBRIGAT√ìRIO
runtimeConfig: {
  public: {
    appName: 'Matrix Protocol',           // ‚Üê CR√çTICO
    appVersion: '0.0.1',                  // ‚Üê CR√çTICO
    siteUrl: process.env.SITE_URL || 'http://localhost:3000',
    casheiroUrl: 'https://casheiro.com.br',
    githubUrl: process.env.GITHUB_URL || 'https://github.com/casheiro/matrix-protocol',
    discordUrl: process.env.DISCORD_URL || 'https://discord.gg/Gd7BxsRhB4'
  }
}
```


**Resultado**: Evita "undefined" nos t√≠tulos das p√°ginas.

---

### 4. **Componentes Nuxt UI - Problemas Identificados**

#### üö® **USlideover - EVITAR COMPLETAMENTE**
```vue
<!-- ‚ùå PROBLEM√ÅTICO (Reka UI bugs) -->
<USlideover v-model="isOpen">
  <!-- Cria elementos √≥rf√£os data-dismissable-layer -->
</USlideover>

<!-- ‚úÖ SOLU√á√ÉO -->
<Transition
  enter-active-class="transition-transform duration-200"
  enter-from-class="-translate-x-full"
  enter-to-class="translate-x-0"
>
  <div v-if="isOpen" class="fixed...">
    <!-- Implementa√ß√£o custom -->
  </div>
</Transition>
```


#### ‚ö†Ô∏è **UDropdown - API v3.x Mudou**
- Verificar sempre documenta√ß√£o Nuxt UI 3.x
- Props e estrutura diferentes da v2.x
- Testar isoladamente antes de usar

---

### 5. **SEO e i18n - Internacionaliza√ß√£o Completa**

#### ‚ùå **PROBLEMA** (Original v1)
```ts
// useSEO.ts - Keywords hardcoded em portugu√™s
keywords = 'Matrix Protocol, Framework, IA, Intelig√™ncia Artificial...'
```


#### ‚úÖ **SOLU√á√ÉO** (Nova v2)
```ts
// useSEO.ts - Internacionalizado
const defaultKeywords = t('seo.keywords.default')
const pageKeywords = keywords || defaultKeywords

// pt.json
"seo": {
  "keywords": {
    "default": "Matrix Protocol, Framework, IA, Intelig√™ncia Artificial...",
  },
  "author": "Casheiro"
}

// en.json  
"seo": {
  "keywords": {
    "default": "Matrix Protocol, Framework, AI, Artificial Intelligence...",
  },
  "author": "Casheiro"
}
```


---

### 6. **Estrutura de Componentes - Auto-import Issues**

#### ‚ùå **PROBLEMA** (Original v1)
```vue
<!-- pages/index.vue -->
<template>
  <main>
    <HomeHeroSection />      <!-- Auto-import falhando -->
    <HomeFrameworksGrid />   <!-- Auto-import falhando -->
    <HomeFeaturesSection />  <!-- Auto-import falhando -->
  </main>
</template>
```


#### ‚úÖ **SOLU√á√ÉO** (Nova v2)
```vue
<!-- pages/index.vue -->
<template>
  <div>
    <!-- Hero Section - INLINE -->
    <section class="relative py-20...">
      <!-- Conte√∫do direto aqui -->
    </section>
    
    <!-- Frameworks Section - INLINE -->
    <section class="py-16...">
      <!-- Conte√∫do direto aqui -->
    </section>
  </div>
</template>
```


**Raz√£o**: Nuxt 4 tem mudan√ßas no auto-import que causam problemas em alguns casos.

---

### 7. **Navega√ß√£o MEP - Padr√£o Obrigat√≥rio**

#### ‚úÖ **Deve aparecer em TODOS os menus**
```vue
<!-- FrameworkDropdown.vue -->
<div v-else-if="item.type === 'mep'" class="flex items-center gap-3 w-full">
  <div class="w-3 h-3 rounded-full flex-shrink-0 bg-gradient-to-br from-blue-600 to-purple-600" />
  <div class="flex-1 min-w-0">
    <div class="flex items-center gap-2">
      <span class="font-medium text-gray-900 dark:text-white">MEP</span>
      <span class="text-xs px-1.5 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full">
        Manifesto
      </span>
    </div>
    <p class="text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5">
      Princ√≠pio Epistemol√≥gico Matrix
    </p>
  </div>
</div>

<!-- MobileDrawer.vue -->
<NuxtLink :to="`/${$i18n.locale}/mep`" class="...">
  <div class="w-3 h-3 rounded-full flex-shrink-0 bg-gradient-to-br from-blue-600 to-purple-600" />
  <span class="font-medium">MEP</span>
  <span class="text-xs px-1.5 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full">
    Manifesto
  </span>
</NuxtLink>
```


---

### 8. **Atribui√ß√£o Casheiro - Padr√£o Completo**

#### ‚úÖ **Footer obrigat√≥rio**
```vue
<p>
  {{ $t('footer.createdBy') }}
  <a :href="config.casheiroUrl" target="_blank" rel="noopener noreferrer"
     class="text-blue-400 hover:text-blue-300 underline transition-colors ml-1">
    {{ $t('footer.casheiroLink') }}
  </a>
</p>
```


#### ‚úÖ **Schema.org**
```ts
// useSEO.ts
const generateSchemaOrg = (title: string, description: string, url: string) => {
  return {
    '@context': 'https://schema.org',
    '@type': 'Organization',
    name: 'Casheiro',                                    // ‚Üê OBRIGAT√ìRIO
    description: 'Empresa criadora e mantenedora do Matrix Protocol',
    url: toValue(config.casheiroUrl),
    // ...
  }
}
```


---

## üîß CHECKLIST DE MIGRA√á√ÉO

### Para cada componente a migrar:

#### **1. An√°lise Pr√©via**
- [ ] Listar todos os `@apply` no componente
- [ ] Identificar rotas com i18n
- [ ] Verificar componentes Nuxt UI usados
- [ ] Mapear textos que precisam i18n

#### **2. Convers√µes Obrigat√≥rias**
- [ ] Converter `@apply` para classes inline
- [ ] Usar `:class` para condicionais din√¢micas
- [ ] Substituir USlideover por Transition customizada
- [ ] Verificar API de UDropdown se necess√°rio

#### **3. i18n e Configura√ß√£o**
- [ ] Todos os textos usando `$t()`
- [ ] Rotas usando `localePath()` (preferencial)
- [ ] Links externos usando config do `useMatrixConfig()`
- [ ] SEO usando composable `useSEO()`

#### **4. Navega√ß√£o e MEP**
- [ ] MEP aparece em dropdowns/menus
- [ ] Cores corretas (gradiente blue-purple)
- [ ] Badge "Manifesto" implementado

#### **5. Valida√ß√£o Final**
- [ ] Build passa sem erros Tailwind
- [ ] Funcionamento em PT e EN
- [ ] Responsive em 3+ breakpoints
- [ ] Acessibilidade (aria-labels, etc.)

---

## üìù PADR√ïES DE C√ìDIGO

### **Estrutura de Composable**
```ts
export const useMatrixConfig = () => {
  const config = useRuntimeConfig()
  
  // Computed properties
  const appName = computed(() => config.public.appName)
  
  // Helper functions
  const getFullUrl = (path: string) => {
    const baseUrl = siteUrl.value.replace(/\/$/, '')
    const cleanPath = path.startsWith('/') ? path : `/${path}`
    return `${baseUrl}${cleanPath}`
  }
  
  return {
    appName,
    getFullUrl,
    // ...
  }
}
```


### **Estrutura de SEO**
```ts
export const useSEO = () => {
  const { t, locale } = useI18n()
  const config = useMatrixConfig()
  
  const generatePageSEO = (options: {
    title?: string
    description?: string
    keywords?: string
    // ...
  }) => {
    const defaultKeywords = t('seo.keywords.default')
    // ...
  }
}
```


### **Estrutura de Navega√ß√£o**
```vue
<template>
  <!-- Sempre com acessibilidade -->
  <nav role="navigation" aria-label="Primary navigation">
    <NuxtLink 
      :to="localePath('/path')" 
      :aria-label="$t('navigation.linkDescription')"
      class="base-classes"
      :class="{ 'active-classes': isActive }"
    >
      {{ $t('navigation.linkText') }}
    </NuxtLink>
  </nav>
</template>
```


---

## üéØ PR√ìXIMOS COMPONENTES PRIORIT√ÅRIOS

### **Fase 2 - Layout Components**
1. `AppHeader.vue` - ‚ö†Ô∏è Tem `@apply` para converter
2. `FrameworkDropdown.vue` - ‚ö†Ô∏è Tem `@apply` para converter  
3. `MobileDrawer.vue` - ‚ö†Ô∏è Tem `@apply` para converter

### **Fase 3 - Framework Components**
1. `FrameworkLayout.vue` - ‚ö†Ô∏è Tem `@apply`
2. `FrameworkSidebar.vue` - ‚ö†Ô∏è Tem `@apply`
3. `TableOfContents.vue` - ‚ö†Ô∏è Tem `@apply`

### **Fase 4 - Content Components**
1. Todos os componentes em `/docs/` - ‚ö†Ô∏è M√∫ltiplos `@apply`
2. Todos os componentes em `/content/` - ‚ö†Ô∏è M√∫ltiplos `@apply`

---

## ‚úÖ VALIDA√á√ÉO DE SUCESSO

### **M√©tricas Alcan√ßadas na index.vue:**
- ‚úÖ Build sem erros Tailwind CSS v4
- ‚úÖ Navega√ß√£o PT/EN funcional 
- ‚úÖ SEO din√¢mico internacional
- ‚úÖ Performance mantida/melhorada
- ‚úÖ Acessibilidade WCAG AA
- ‚úÖ Todas as funcionalidades preservadas
- ‚úÖ Visual id√™ntico ao original

### **Replicar em todos os pr√≥ximos componentes.**

---

**Data**: Janeiro 2025  
**Status**: Padr√µes consolidados e validados  
**Pr√≥ximo**: Aplicar em componentes da Fase 2