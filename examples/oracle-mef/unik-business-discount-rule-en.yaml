id: uki:business:rule:loyalty-discount
title: Customer Loyalty Discount Calculation Rule
scope_ref: organization
scope_mode: propagated
domain_ref: business
type_ref: rule
context_ref: implementation
maturity_ref: approved
status: active
version: "1.0.0"
created_date: "2024-08-12"
last_modified: "2024-08-12"
content: |
  Business rule for calculating discounts based on customer loyalty level and purchase amount.
  
  This rule defines how to apply discounts consistently and fairly, maximizing customer retention.
  
  ## Loyalty Tiers
  
  | Tier | Accumulated Points | Base Discount | Minimum Purchase |
  |------|-------------------|---------------|------------------|
  | Bronze | 0 - 999 | 5% | $100.00 |
  | Silver | 1,000 - 4,999 | 10% | $50.00 |
  | Gold | 5,000+ | 15% | No minimum |
  
  ## Special Conditions
  
  - **First purchase**: +5% additional for new customers
  - **Orders over $500**: +2% additional
  - **Maximum discount**: 25% of total value
  - **Sale items**: Do not stack with loyalty discount
  
  ## Calculation Formula
  
  ```
  Final Discount = MIN(
    (Base Discount + First Purchase Bonus + High Value Bonus),
    25%
  )
  ```
  
  ## Application Rules
  
  1. Verify customer eligibility
  2. Apply base discount according to tier
  3. Add applicable bonuses
  4. Respect maximum limit of 25%
  5. Log applied discount for audit trail
examples:
  - input: "Gold customer (6,000 points) purchasing $300"
    output: "15% discount = $45.00"
  - input: "New Bronze customer purchasing $150"
    output: "10% discount (5% base + 5% first purchase) = $15.00"
  - input: "Silver customer purchasing $600"
    output: "12% discount (10% base + 2% high value) = $72.00"
  - input: "Bronze customer purchasing $80"
    output: "No discount (below minimum $100)"
related_to:
  - target: uki:business:program:loyalty
    relation_type: implements
    description: Implements loyalty program rules
  - target: uki:product:flow:checkout
    relation_type: relates_to
    description: Applied during checkout flow
  - target: uki:technical:api:pricing
    relation_type: depends_on
    description: Depends on pricing API for calculations
change_summary: "Initial structure for loyalty discount rule"
change_impact: "Defines consistent criteria for discount application"
previous_version: null
domain_of_influence: "E-commerce system and customer service"
last_validation: "2024-08-12"