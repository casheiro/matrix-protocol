# Guia de Sincroniza√ß√£o Website ‚Üî Reposit√≥rio

**Vers√£o:** 1.0.0  
**Data:** 2025-10-05  
**Status:** Ativo  

## √çndice

1. [Vis√£o Geral](#vis√£o-geral)
2. [Arquivos que DEVEM estar Sincronizados](#arquivos-que-devem-estar-sincronizados)
3. [Conte√∫do que PODE Divergir](#conte√∫do-que-pode-divergir)
4. [Processo de Sincroniza√ß√£o](#processo-de-sincroniza√ß√£o)
5. [Workflows e Responsabilidades](#workflows-e-responsabilidades)
6. [Ferramentas e Scripts](#ferramentas-e-scripts)
7. [Checklist de Sincroniza√ß√£o](#checklist-de-sincroniza√ß√£o)
8. [Resolu√ß√£o de Conflitos](#resolu√ß√£o-de-conflitos)

---

## Vis√£o Geral

Este guia estabelece o processo de sincroniza√ß√£o entre o **reposit√≥rio principal** (fonte can√¥nica) e o **website** (interface p√∫blica) do Matrix Protocol.

### Princ√≠pios Fundamentais

1. **Reposit√≥rio = Fonte de Verdade** para especifica√ß√µes t√©cnicas
2. **Website = Interface Acess√≠vel** com conte√∫do pedag√≥gico adicional
3. **Sincroniza√ß√£o Bidirecional** para melhorias e corre√ß√µes
4. **Versionamento Consistente** em ambos os ambientes

### Estrat√©gia de Dois Reposit√≥rios

```mermaid
graph LR
    A[Reposit√≥rio Principal] <--> B[Website Reposit√≥rio]
    A --> C[Especifica√ß√µes Autoritativas]
    B --> D[Interface P√∫blica + Pedagogia]
    A --> E[Guias e Templates]
    B --> F[Downloads e Recursos]
    
    subgraph "Sincroniza√ß√£o"
        G[Specs] --> H[Bidirecional]
        I[Guides] --> J[Repo ‚Üí Website]
        K[Visuals] --> L[Website ‚Üí Repo]
    end
```

---

## Arquivos que DEVEM estar Sincronizados

### Especifica√ß√µes Core (Sincroniza√ß√£o Obrigat√≥ria)

| Reposit√≥rio | Website | Tipo de Sync |
|-------------|---------|---------------|
| `MATRIX_PROTOCOL.md` | `/content/en/protocol/index.md` | **Bidirecional** |
| `MATRIX_PROTOCOL_PT.md` | `/content/pt/protocol/index.md` | **Bidirecional** |
| `MEP_MATRIX_EPISTEMIC_PRINCIPLE.md` | `/content/en/mep/index.md` | **Bidirecional** |
| `MEP_MATRIX_EPISTEMIC_PRINCIPLE_PT.md` | `/content/pt/mep/index.md` | **Bidirecional** |
| `MEF_MATRIX_EMBEDDING_FRAMEWORK.md` | `/content/en/frameworks/mef.md` | **Bidirecional** |
| `MEF_MATRIX_EMBEDDING_FRAMEWORK_PT.md` | `/content/pt/frameworks/mef.md` | **Bidirecional** |
| `ZOF_ZION_ORCHESTRATION_FRAMEWORK.md` | `/content/en/frameworks/zof.md` | **Bidirecional** |
| `ZOF_ZION_ORCHESTRATION_FRAMEWORK_PT.md` | `/content/pt/frameworks/zof.md` | **Bidirecional** |
| `OIF_OPERATOR_INTELLIGENCE_FRAMEWORK.md` | `/content/en/frameworks/oif.md` | **Bidirecional** |
| `OIF_OPERATOR_INTELLIGENCE_FRAMEWORK_PT.md` | `/content/pt/frameworks/oif.md` | **Bidirecional** |
| `MOC_MATRIX_ONTOLOGY_CATALOG.md` | `/content/en/frameworks/moc.md` | **Bidirecional** |
| `MOC_MATRIX_ONTOLOGY_CATALOG_PT.md` | `/content/pt/frameworks/moc.md` | **Bidirecional** |
| `MAL_MATRIX_ARBITER_LAYER.md` | `/content/en/frameworks/mal.md` | **Bidirecional** |
| `MAL_MATRIX_ARBITER_LAYER_PT.md` | `/content/pt/frameworks/mal.md` | **Bidirecional** |

### Campos Obrigatoriamente Id√™nticos

- **Version:** Deve ser id√™ntica (atualmente v0.0.1)
- **Status:** Deve ser id√™ntico (Beta para todos, Active para MAL)
- **Last Updated:** Deve ser sincronizado
- **Normative Sections:** Devem ser semanticamente id√™nticas
- **Cross-references:** Devem apontar para conte√∫do equivalente

---

## Conte√∫do que PODE Divergir

### Permitido Diferir Entre Reposit√≥rio e Website

| Tipo | Reposit√≥rio | Website | Justificativa |
|------|-------------|---------|---------------|
| **Frontmatter** | Headers markdown simples | Hugo/Nuxt metadata | Necess√°rio para CMS |
| **Links Internos** | `./MEF_*.md` | `/frameworks/mef` | Diferentes sistemas de navega√ß√£o |
| **Exemplos** | Concisos | Expandidos/interativos | Pedagogia aprimorada |
| **Visualiza√ß√µes** | B√°sicas | Coloridas/interativas | Melhor UX no website |
| **Downloads** | N√£o aplic√°vel | `/public/downloads/` | Recursos adicionais |

### Hugo Frontmatter (Website)

```yaml
---
title: "Matrix Embedding Framework"
description: "Framework para estrutura√ß√£o de conhecimento via UKIs"
framework:
  key: "mef"
  color: "emerald"
  icon: "mef-logo-icon.svg"
navigation:
  order: 2
seo:
  keywords: ["MEF", "UKI", "knowledge", "embedding"]
---
```

### Markdown Headers (Reposit√≥rio)

```markdown
# MEF ‚Äî Matrix Embedding Framework
**Version:** 0.0.1
**Status:** Beta
**Last Updated:** 2025-10-05
```

---

## Processo de Sincroniza√ß√£o

### Workflow de Modifica√ß√£o

```mermaid
sequenceDiagram
    participant Dev as Developer
    participant Repo as Repository
    participant CI as CI/CD
    participant Website as Website
    participant QA as Quality Check
    
    Dev->>Repo: 1. Modify specification
    Repo->>CI: 2. Trigger validation
    CI->>CI: 3. Check version consistency
    CI->>CI: 4. Validate cross-references
    CI->>Website: 5. Auto-sync if spec change
    Website->>QA: 6. Quality validation
    QA->>Dev: 7. Report status
```

### Tipos de Mudan√ßa

#### 1. **Mudan√ßas de Especifica√ß√£o** (Reposit√≥rio ‚Üí Website)

**Trigger:** Modifica√ß√£o em arquivos core (`*_FRAMEWORK.md`, `MATRIX_PROTOCOL.md`)

**Processo:**
1. Desenvolver atualiza especifica√ß√£o no reposit√≥rio
2. CI/CD detecta mudan√ßa em arquivo cr√≠tico
3. Validation pipeline executa verifica√ß√µes
4. Auto-sync para website equivalente (remover frontmatter, adicionar headers)
5. Notifica√ß√£o para website maintainer
6. Review e deploy no website

#### 2. **Melhorias Pedag√≥gicas** (Website ‚Üí Reposit√≥rio)

**Trigger:** Novo conte√∫do valioso no website (guias, exemplos, visualiza√ß√µes)

**Processo:**
1. Website team desenvolve conte√∫do pedag√≥gico
2. Evaluation: conte√∫do beneficia reposit√≥rio?
3. Se sim, adaptar para formato reposit√≥rio
4. PR no reposit√≥rio com justificativa
5. Review por spec maintainers
6. Merge e documenta√ß√£o no CHANGELOG

#### 3. **Corre√ß√µes de Erro** (Bidirecional Imediato)

**Trigger:** Bug report ou erro identificado

**Processo:**
1. Corre√ß√£o aplicada na fonte prim√°ria
2. Sync imediato para ambiente secund√°rio
3. Validation autom√°tica
4. Notifica√ß√£o de corre√ß√£o
5. Update no CHANGELOG

### Frequ√™ncia de Sincroniza√ß√£o

| Tipo | Frequ√™ncia | Automa√ß√£o |
|------|------------|-----------|
| **Specs Cr√≠ticas** | Imediato | ‚úÖ CI/CD |
| **Guias e Templates** | Semanal | üîÑ Manual Review |
| **Visualiza√ß√µes** | Quinzenal | üîÑ Manual Review |
| **Meta-documenta√ß√£o** | Mensal | üîÑ Manual Review |

---

## Workflows e Responsabilidades

### Pap√©is e Responsabilidades

| Papel | Responsabilidade | Ferramentas |
|-------|-----------------|-------------|
| **Spec Maintainer** | Garantir corre√ß√£o t√©cnica das especifica√ß√µes | Repository, VS Code, validation scripts |
| **Website Maintainer** | Garantir acessibilidade e navega√ß√£o adequada | Nuxt, Hugo, CMS tools |
| **Sync Coordinator** | Executar sincroniza√ß√µes semanais e resolver conflitos | Scripts, CI/CD, diff tools |
| **QA Reviewer** | Validar consist√™ncia e qualidade | Browser testing, link checkers |
| **Community** | Reportar inconsist√™ncias via issues | GitHub issues, discussions |

### Workflow Semanal de Sincroniza√ß√£o

#### Segunda-feira: Status Check
```bash
# Executar script de verifica√ß√£o
./scripts/check-internal-links.sh
./scripts/validate-cross-references.sh

# Verificar vers√µes
grep -r "Version:" *.md | grep -v "0.0.1"
```

#### Quarta-feira: Content Review
1. Review de PRs pendentes no reposit√≥rio
2. Check de novos downloads no website
3. Validation de links quebrados
4. Update de navigation map se necess√°rio

#### Sexta-feira: Sync Execution
1. Aplicar mudan√ßas pendentes
2. Executar tests de integra√ß√£o
3. Update do CHANGELOG se houver mudan√ßas
4. Comunicar status para stakeholders

### Issue Templates

#### Template: Inconsist√™ncia Reposit√≥rio ‚Üî Website

```markdown
---
name: Sync Inconsistency
about: Report divergence between repository and website
title: '[SYNC] Inconsistency in [framework/section]'
labels: 'sync-required, bug'
---

## Descri√ß√£o da Inconsist√™ncia

**Reposit√≥rio:** [URL/file and line]
**Website:** [URL and section]

## Conte√∫do Divergente

**Reposit√≥rio cont√©m:**
```
[paste content]
```

**Website cont√©m:**
```
[paste content]
```

## Impacto
- [ ] Cr√≠tico - Afeta implementa√ß√£o
- [ ] Alto - Confunde usu√°rios  
- [ ] M√©dio - Inconsist√™ncia menor
- [ ] Baixo - Cosm√©tico

## Qual vers√£o est√° correta?
- [ ] Reposit√≥rio
- [ ] Website
- [ ] Ambos est√£o errados
- [ ] N√£o tenho certeza

## Context/Background
[Additional information]
```

---

## Ferramentas e Scripts

### Scripts de Valida√ß√£o

#### 1. `scripts/check-internal-links.sh`

```bash
#!/bin/bash
# Verifica links internos no reposit√≥rio

echo "üîç Checking internal links..."

# Check .md references
find . -name "*.md" -exec grep -l "\[.*\](\..*\.md)" {} \; | while read file; do
    echo "Checking $file..."
    grep -n "\[.*\](\..*\.md)" "$file" | while read line; do
        link=$(echo "$line" | sed 's/.*](\([^)]*\)).*/\1/')
        if [[ ! -f "$link" ]]; then
            echo "‚ùå Broken link in $file: $link"
        fi
    done
done

echo "‚úÖ Internal links check complete"
```

#### 2. `scripts/validate-cross-references.sh`

```bash
#!/bin/bash
# Valida refer√™ncias cruzadas entre frameworks

echo "üîç Validating cross-references..."

# Check if all referenced files exist
referenced_files=$(grep -r "\.md)" *.md | sed 's/.*](\([^)]*\.md\)).*/\1/' | sort -u)

for file in $referenced_files; do
    if [[ ! -f "$file" ]]; then
        echo "‚ùå Referenced file not found: $file"
    else
        echo "‚úÖ $file exists"
    fi
done

echo "‚úÖ Cross-references validation complete"
```

#### 3. `scripts/check-version-consistency.sh`

```bash
#!/bin/bash
# Verifica consist√™ncia de vers√µes

echo "üîç Checking version consistency..."

target_version="0.0.1"
files=(*.md)

for file in "${files[@]}"; do
    if [[ -f "$file" ]]; then
        version=$(grep "Version:" "$file" | head -1 | sed 's/.*Version:\s*//' | tr -d '*')
        if [[ "$version" != "$target_version" ]]; then
            echo "‚ùå $file: incorrect version: $version (expected: $target_version)"
        else
            echo "‚úÖ $file: version OK"
        fi
    fi
done

echo "‚úÖ Version consistency check complete"
```

### CI/CD Integration

#### GitHub Actions Workflow (`.github/workflows/sync-validation.yml`)

```yaml
name: Sync Validation

on:
  push:
    paths:
      - '*.md'
      - 'examples/**'
      - 'guides/**'
      - 'templates/**'
  pull_request:
    paths:
      - '*.md'

jobs:
  validate-sync:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Check Version Consistency
        run: ./scripts/check-version-consistency.sh
        
      - name: Validate Internal Links
        run: ./scripts/check-internal-links.sh
        
      - name: Validate Cross References
        run: ./scripts/validate-cross-references.sh
        
      - name: Check UKI Format
        run: |
          if grep -r "uki:\[domain_ref\]" *.md; then
            echo "‚ùå Found incorrect UKI format (domain-first)"
            exit 1
          fi
          echo "‚úÖ UKI format validation passed"
```

---

## Checklist de Sincroniza√ß√£o

### Pre-Sync Checklist

- [ ] Backup de ambos os reposit√≥rios
- [ ] Verificar se n√£o h√° trabalho em andamento conflitante
- [ ] Executar scripts de valida√ß√£o
- [ ] Review de issues pendentes relacionadas √† sync

### Durante a Sincroniza√ß√£o

#### Para Mudan√ßas no Reposit√≥rio:

- [ ] Identificar arquivos modificados
- [ ] Verificar se requer sync para website
- [ ] Remover frontmatter Hugo se necess√°rio
- [ ] Atualizar links internos para formato website
- [ ] Aplicar mudan√ßas no website
- [ ] Testar navega√ß√£o no website
- [ ] Validar rendering de Mermaid diagrams

#### Para Mudan√ßas no Website:

- [ ] Avaliar se beneficia reposit√≥rio
- [ ] Adaptar formato para markdown puro
- [ ] Converter links website para refer√™ncias .md
- [ ] Remover depend√™ncias de Hugo/Nuxt
- [ ] Aplicar no reposit√≥rio
- [ ] Executar validation scripts

### Post-Sync Checklist

- [ ] Testar links em ambos ambientes
- [ ] Verificar rendering correto de diagramas
- [ ] Confirmar vers√µes consistentes
- [ ] Update do CHANGELOG se necess√°rio
- [ ] Comunica√ß√£o para stakeholders
- [ ] Close de issues relacionadas

---

## Resolu√ß√£o de Conflitos

### Tipos de Conflito

#### 1. **Conflito de Vers√£o**

**Situa√ß√£o:** Reposit√≥rio tem v0.0.2, website tem v0.0.1

**Resolu√ß√£o:**
```bash
# Determinar qual √© a vers√£o correta
git log --oneline --grep="version"

# Aplicar vers√£o correta em ambos
# Documentar decis√£o no CHANGELOG
```

#### 2. **Conflito de Conte√∫do**

**Situa√ß√£o:** Mesmo framework tem especifica√ß√µes diferentes

**Resolu√ß√£o:**
1. Identificar qual vers√£o est√° correta
2. Aplicar vers√£o correta como fonte can√¥nica
3. Sync para ambiente secund√°rio
4. Documentar raz√£o da decis√£o

#### 3. **Conflito de Formato UKI**

**Situa√ß√£o:** Website usa domain-first, reposit√≥rio usa scope-first

**Resolu√ß√£o:**
```bash
# Scope-first √© sempre correto
# Corrigir website para uki:[scope_ref]:[type_ref]:[slug]
sed -i 's/uki:\[domain_ref\]/uki:[scope_ref]/g' affected_files
```

### Escala√ß√£o de Conflitos

| Severidade | Respons√°vel | Prazo |
|------------|-------------|-------|
| **P0 - Cr√≠tico** | Spec Maintainer | Imediato |
| **P1 - Alto** | Sync Coordinator | 24h |
| **P2 - M√©dio** | Website Maintainer | 1 semana |
| **P3 - Baixo** | Community | Pr√≥ximo cycle |

### Processo de Arbitragem

1. **Identifica√ß√£o:** Conflito detectado
2. **Documenta√ß√£o:** Issue criado com evid√™ncias
3. **An√°lise:** Review por maintainers relevantes
4. **Decis√£o:** Baseada em princ√≠pios do protocolo
5. **Aplica√ß√£o:** Mudan√ßas implementadas
6. **Documenta√ß√£o:** CHANGELOG atualizado

---

## M√©tricas e Monitoramento

### KPIs de Sincroniza√ß√£o

| M√©trica | Meta | Medi√ß√£o |
|---------|------|---------|
| **Tempo de Sync** | < 24h para mudan√ßas cr√≠ticas | Timestamp tracking |
| **Consist√™ncia de Vers√£o** | 100% | Script automation |
| **Links Funcionais** | 99%+ | Weekly validation |
| **Conflitos Pendentes** | < 3 | Issue tracking |

### Dashboard de Status

```markdown
## Sync Status Dashboard

**Last Sync:** 2025-10-05 14:30 UTC
**Status:** ‚úÖ All systems synchronized

### Version Consistency
- Repository: v0.0.1 ‚úÖ
- Website: v0.0.1 ‚úÖ
- Status: MAL=Active, Others=Beta ‚úÖ

### Link Health
- Internal Links: 98% (2 broken)
- Cross References: 100% ‚úÖ
- Navigation Map: Updated ‚úÖ

### Pending Actions
- [ ] Fix 2 broken links in examples/
- [ ] Update website MEF Section 5
- [ ] Sync ZOF Universal Pattern
```

---

## Hist√≥rico de Vers√µes

| Vers√£o | Data | Mudan√ßas |
|--------|------|----------|
| **1.0.0** | 2025-10-05 | Vers√£o inicial do guia |
| **0.9.0** | 2025-10-05 | Draft completo para review |

---

## Contatos e Suporte

### Equipe de Sincroniza√ß√£o

- **Spec Maintainer:** Matrix Protocol Core Team
- **Sync Coordinator:** [TBD]
- **Website Maintainer:** [TBD]

### Canais de Comunica√ß√£o

- **Issues Urgentes:** GitHub Issues com label `sync-required`
- **Discuss√µes:** GitHub Discussions categoria "Sync"
- **Updates:** CHANGELOG.md e releases

---

**Mantido por:** Matrix Protocol Core Team  
**Pr√≥xima revis√£o:** 2025-11-05  
**Documentos relacionados:** [CONSOLIDATION_PLAN.md](./CONSOLIDATION_PLAN.md), [NAVIGATION_MAP.md](./NAVIGATION_MAP.md)